<form
  [formGroup]="form"
  class="row g-3 justify-content-center p-4 border rounded shadow-lg my-5 bg-body text-body w-75 mx-auto"
  (ngSubmit)="submit()"
  novalidate
>
  <!-- Prénom -->
  <div class="col-12 col-md-6">
    <label for="name" class="form-label">Prénom</label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-person"></i></span>
      <input
        type="text"
        id="name"
        class="form-control"
        [ngClass]="{
          'is-invalid': form.get('name')?.invalid && form.get('name')?.touched,
          'is-valid': form.get('name')?.valid && form.get('name')?.touched,
        }"
        formControlName="name"
      />
    </div>
    <div class="invalid-feedback">
      Le prénom est requis (min. 3 caractères).
    </div>
  </div>

  <!-- Nom -->
  <div class="col-12 col-md-6">
    <label for="lastName" class="form-label">Nom</label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
      <input
        type="text"
        id="lastName"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            form.get('lastName')?.invalid && form.get('lastName')?.touched,
          'is-valid':
            form.get('lastName')?.valid && form.get('lastName')?.touched,
        }"
        formControlName="lastName"
      />
    </div>
    <div class="invalid-feedback">Le nom est requis (min. 3 caractères).</div>
  </div>

  <!-- Date de naissance -->
  <div class="col-12 col-md-6">
    <label for="birthday" class="form-label">Date de naissance</label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-calendar-date"></i></span>
      <input
        type="date"
        id="birthday"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            form.get('birthday')?.invalid && form.get('birthday')?.touched,
          'is-valid':
            form.get('birthday')?.valid && form.get('birthday')?.touched
        }"
        formControlName="birthday"
      />
    </div>
    <div class="invalid-feedback">La date de naissance est requise.</div>
  </div>

  <!-- Genre -->
  <div class="col-12 col-md-6">
    <label for="gender" class="form-label">Genre</label>
    <div class="input-group">
      <span class="input-group-text"
        ><i class="bi bi-gender-ambiguous"></i
      ></span>
      <select
        id="gender"
        class="form-select"
        formControlName="gender"
        [ngClass]="{
          'is-invalid':
            form.get('gender')?.invalid && form.get('gender')?.touched,
          'is-valid': form.get('gender')?.valid && form.get('gender')?.touched
        }"
      >
        <option value="">-- Sélectionnez --</option>
        <option value="homme">Homme</option>
        <option value="femme">Femme</option>
        <option value="autres">Autre</option>
      </select>
    </div>
    <div class="invalid-feedback">Le genre est requis.</div>
  </div>

  <!-- Mot de passe -->
  <div class="col-12 col-md-6">
    <label for="password" class="form-label">Mot de passe</label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-lock"></i></span>
      <input
        type="password"
        id="password"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            form.get('password')?.invalid && form.get('password')?.touched,
          'is-valid':
            form.get('password')?.valid && form.get('password')?.touched,
        }"
        formControlName="password"
      />
    </div>
    <div class="invalid-feedback">
      Le mot de passe doit contenir 8 caractères, dont 1 majuscule et 1 chiffre.
    </div>
  </div>

  <!-- Confirmation mot de passe -->
  <div class="col-12 col-md-6">
    <label for="cPassword" class="form-label">Confirmation mot de passe</label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-shield-lock"></i></span>
      <input
        type="password"
        id="cPassword"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            form.get('cPassword')?.invalid && form.get('cPassword')?.touched,
          'is-valid':
            form.get('cPassword')?.valid && form.get('cPassword')?.touched,
        }"
        formControlName="cPassword"
      />
    </div>
    <div class="invalid-feedback">
      La confirmation doit respecter le même format que le mot de passe.
    </div>
    <div
      class="text-danger small mt-1"
      *ngIf="
        form.errors?.['passwordsMismatch'] &&
        (form.get('cPassword')?.touched || form.get('password')?.touched)
      "
    >
      Les mots de passe ne correspondent pas.
    </div>
  </div>

  <!-- Téléphone -->
  <div class="col-12 col-md-6">
    <label for="phone" class="form-label">Numéro de téléphone</label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-telephone"></i></span>
      <input
        type="tel"
        id="phone"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            form.get('phone')?.invalid && form.get('phone')?.touched,
          'is-valid': form.get('phone')?.valid && form.get('phone')?.touched,
        }"
        formControlName="phone"
      />
    </div>
    <div class="invalid-feedback">
      Numéro de téléphone invalide (format FR requis).
    </div>
  </div>

  <!-- Email -->
  <div class="col-12 col-md-6">
    <label for="email" class="form-label">Adresse email</label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-envelope"></i></span>
      <input
        type="email"
        id="email"
        class="form-control"
        [ngClass]="{
          'is-invalid': form.get('mail')?.invalid && form.get('mail')?.touched,
          'is-valid': form.get('mail')?.valid && form.get('mail')?.touched,
        }"
        formControlName="mail"
      />
    </div>
    <div class="invalid-feedback">Adresse email invalide.</div>
  </div>

  <!-- Bouton submit -->
  <div class="col-12 d-flex gap-5">
    <button type="submit" class="btn btn-primary" [disabled]="!form.valid">
      <i class="bi bi-save me-1"></i> Modifier
    </button>
    <a routerLink="/dashboard/profile" class="btn btn-primary">Retour</a>
  </div>
</form>
