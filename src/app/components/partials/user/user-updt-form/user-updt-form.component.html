<form
  [formGroup]="form"
  class="row justify-content-center py-2 px-1 needs-validation border rounded shadow-lg m-4 bg-dark bg-gradient text-white"
  (ngSubmit)="submit()"
  novalidate
>
  <div class="d-flex flex-wrap col-12 col-md-6 my-2">
    <label for="name" class="w-100">Prénom</label>
    <input
      type="text"
      class="form-control"
      [ngClass]="{
        'is-invalid': form.get('name')?.invalid && form.get('name')?.touched,
        'is-valid': form.get('name')?.valid && form.get('name')?.touched,
      }"
      formControlName="name"
    />
    <div class="invalid-feedback">
      Le prénom est requis (min. 3 caractères).
    </div>
  </div>

  <div class="d-flex flex-wrap col-12 col-md-6 my-2">
    <label for="lastName" class="w-100">Nom</label>
    <input
      type="text"
      class="form-control"
      [ngClass]="{
        'is-invalid':
          form.get('lastName')?.invalid && form.get('lastName')?.touched,
        'is-valid':
          form.get('lastName')?.valid && form.get('lastName')?.touched,
      }"
      formControlName="lastName"
    />
    <div class="invalid-feedback">Le nom est requis (min. 3 caractères).</div>
  </div>

  <div class="d-flex flex-wrap col-12 col-md-6 my-2">
    <label for="password" class="w-100">Mot de passe</label>
    <input
      type="password"
      class="form-control"
      [ngClass]="{
        'is-invalid':
          form.get('password')?.invalid && form.get('password')?.touched,
        'is-valid':
          form.get('password')?.valid && form.get('password')?.touched,
      }"
      formControlName="password"
    />
    <div class="invalid-feedback">
      Le mot de passe doit contenir 8 caractères, dont 1 majuscule et 1 chiffre.
    </div>
  </div>

  <div class="d-flex flex-wrap col-12 col-md-6 my-2">
    <label for="cPassword" class="w-100">Confirmation mot de passe</label>
    <input
      type="password"
      class="form-control"
      [ngClass]="{
        'is-invalid':
          form.get('cPassword')?.invalid && form.get('cPassword')?.touched,
        'is-valid':
          form.get('cPassword')?.valid && form.get('cPassword')?.touched,
      }"
      formControlName="cPassword"
    />
    <div class="invalid-feedback">
      La confirmation doit respecter le même format que le mot de passe.
    </div>

    <div
      class="text-danger mt-1"
      *ngIf="
        form.errors?.['passwordsMismatch'] &&
        (form.get('cPassword')?.touched || form.get('password')?.touched)
      "
    >
      Les mots de passe ne correspondent pas.
    </div>
  </div>

  <div class="d-flex flex-wrap col-12 col-md-6 my-2">
    <label for="phone" class="w-100">Numéro de téléphone</label>
    <input
      type="tel"
      class="form-control"
      [ngClass]="{
        'is-invalid': form.get('phone')?.invalid && form.get('phone')?.touched,
        'is-valid': form.get('phone')?.valid && form.get('phone')?.touched,
      }"
      formControlName="phone"
    />
    <div class="invalid-feedback">
      Numéro de téléphone invalide (format FR requis).
    </div>
  </div>

  <div class="d-flex flex-wrap col-12 col-md-6 my-2">
    <label for="email" class="w-100">Adresse email</label>
    <input
      type="email"
      class="form-control"
      [ngClass]="{
        'is-invalid': form.get('mail')?.invalid && form.get('mail')?.touched,
        'is-valid': form.get('mail')?.valid && form.get('mail')?.touched,
      }"
      formControlName="mail"
    />
    <div class="invalid-feedback">Adresse email invalide.</div>
  </div>

  <div class="d-flex gap-3 col-10">
    <input
      type="submit"
      value="Modifier"
      class="btn btn-primary"
      [disabled]="!form.valid"
    />
  </div>
</form>
